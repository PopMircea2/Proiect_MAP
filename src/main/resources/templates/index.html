<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cinema Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <style>
        :root{--accent:#0d6efd;--muted:#6c757d}
        html,body{height:100%;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
        body{background: linear-gradient(180deg,#f7f9fc 0%, #eef3fb 100%);}
        .navbar {background: rgba(255,255,255,0.9);}
        .hero {background: rgba(255,255,255,0.6);backdrop-filter: blur(6px);border-radius:1rem;padding:1.25rem;box-shadow:0 8px 24px rgba(13,110,253,0.06)}
        .stat-card{border-radius:.75rem;padding:1rem;background:linear-gradient(180deg,rgba(255,255,255,0.8),rgba(255,255,255,0.6));box-shadow:0 6px 18px rgba(16,24,40,0.04)}
        .entity-card{transition:transform .16s cubic-bezier(.2,.8,.2,1), box-shadow .16s; border-radius:.8rem}
        .entity-card:hover{transform:translateY(-8px);box-shadow:0 12px 40px rgba(2,6,23,0.08)}
        .entity-icon{width:56px;height:56px;display:flex;align-items:center;justify-content:center;border-radius:.6rem;font-size:22px}
        .search-box{max-width:520px}
        .fade-up{opacity:0;transform:translateY(10px);transition:opacity .45s ease, transform .45s ease}
        .fade-up.show{opacity:1;transform:none}
        .card-description{color:var(--muted);font-size:.9rem}
        footer{padding:2.25rem 0;color:var(--muted)}
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" th:href="@{/}">Cinema Admin</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navMenu">
            <ul class="navbar-nav ms-auto align-items-lg-center">
                <li class="nav-item pe-2"><a class="nav-link" th:href="@{/movies}">Movies</a></li>
                <li class="nav-item pe-2"><a class="nav-link" th:href="@{/customers}">Customers</a></li>
                <li class="nav-item pe-2"><a class="nav-link" th:href="@{/theatres}">Theatres</a></li>
                <li class="nav-item ms-2"><a class="btn btn-sm btn-outline-primary" th:href="@{/movies/new}">Add Movie</a></li>
            </ul>
        </div>
    </div>
</nav>

<main class="container my-5">
    <div class="row g-4 align-items-center mb-3">
        <div class="col-12 col-md-7">
            <div class="hero">
                <div class="d-flex align-items-start gap-3">
                    <div class="flex-grow-1">
                        <h1 class="h3 mb-1">Cinema Admin Dashboard</h1>
                        <p class="mb-2" style="color:var(--muted)">Manage movies, schedules, halls, seats, staff and tickets in one place.</p>
                        <div class="d-flex gap-2">
                            <a th:href="@{/movies/new}" class="btn btn-primary">Add Movie</a>
                            <a th:href="@{/customers/new}" class="btn btn-outline-secondary">Add Customer</a>
                            <a th:href="@{/screenings/new}" class="btn btn-outline-success">Add Screening</a>
                        </div>
                    </div>
                    <div class="d-none d-md-block text-end">
                        <div class="stat-card mb-2 text-end">
                            <div class="fw-bold" th:text="${moviesCount != null ? moviesCount : 0}">0</div>
                            <div class="text-muted small">Movies</div>
                        </div>
                        <div class="stat-card text-end">
                            <div class="fw-bold" th:text="${customersCount != null ? customersCount : 0}">0</div>
                            <div class="text-muted small">Customers</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-5">
            <div class="card p-3 shadow-sm">
                <div class="d-flex align-items-center gap-3">
                    <div class="flex-grow-1">
                        <input id="search" type="search" class="form-control search-box" placeholder="Search sections (e.g. ‘movie’, ‘hall’)" aria-label="Search sections">
                    </div>
                    <div>
                        <a class="btn btn-outline-secondary" id="clearSearch">Clear</a>
                    </div>
                </div>
                <div class="mt-3 small text-muted">Tip: type to filter the cards below</div>
            </div>
        </div>
    </div>

    <div class="row g-3" id="cardsContainer">
        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/movies}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon bg-primary text-white"><i class="bi bi-film"></i></div>
                    <div>
                        <h5 class="mb-0">Movies</h5>
                        <div class="card-description">Manage titles, duration and ratings</div>
                    </div>
                    <div class="ms-auto">
                        <span class="badge bg-primary rounded-pill" th:text="${moviesCount != null ? moviesCount : ''}"></span>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/customers}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon bg-success text-white"><i class="bi bi-people"></i></div>
                    <div>
                        <h5 class="mb-0">Customers</h5>
                        <div class="card-description">View customers and their tickets</div>
                    </div>
                    <div class="ms-auto">
                        <span class="badge bg-success rounded-pill" th:text="${customersCount != null ? customersCount : ''}"></span>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/theatres}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon bg-info text-white"><i class="bi bi-building"></i></div>
                    <div>
                        <h5 class="mb-0">Theatres</h5>
                        <div class="card-description">Manage theatre locations and halls</div>
                    </div>
                    <div class="ms-auto">
                        <span class="badge bg-info rounded-pill" th:text="${theatresCount != null ? theatresCount : ''}"></span>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/halls}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon bg-warning text-white"><i class="bi bi-camera-reels"></i></div>
                    <div>
                        <h5 class="mb-0">Halls</h5>
                        <div class="card-description">Seats & screenings per hall</div>
                    </div>
                    <div class="ms-auto">
                        <span class="badge bg-warning rounded-pill" th:text="${hallsCount != null ? hallsCount : ''}"></span>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/seats}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon bg-secondary text-white"><i class="bi bi-grid-3x3-gap"></i></div>
                    <div>
                        <h5 class="mb-0">Seats</h5>
                        <div class="card-description">Manage seat layout and labels</div>
                    </div>
                    <div class="ms-auto">
                        <span class="badge bg-secondary rounded-pill" th:text="${seatsCount != null ? seatsCount : ''}"></span>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/screenings}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon bg-danger text-white"><i class="bi bi-calendar3"></i></div>
                    <div>
                        <h5 class="mb-0">Screenings</h5>
                        <div class="card-description">Schedule showings and assign halls</div>
                    </div>
                    <div class="ms-auto">
                        <span class="badge bg-danger rounded-pill" th:text="${screeningsCount != null ? screeningsCount : ''}"></span>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/tickets}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon" style="background:linear-gradient(180deg,#6f42c1,#5a2ea6);color:white"><i class="bi bi-ticket-perforated"></i></div>
                    <div>
                        <h5 class="mb-0">Tickets</h5>
                        <div class="card-description">Sales, prices and seat assignments</div>
                    </div>
                    <div class="ms-auto">
                        <span class="badge" style="background:linear-gradient(180deg,#6f42c1,#5a2ea6)" th:text="${ticketsCount != null ? ticketsCount : ''}"></span>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/staffassignments}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon" style="background:linear-gradient(180deg,#20c997,#17a589);color:white"><i class="bi bi-person-badge"></i></div>
                    <div>
                        <h5 class="mb-0">Staff Assignments</h5>
                        <div class="card-description">Assign staff to screenings</div>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/supportstaff}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon" style="background:linear-gradient(180deg,#6610f2,#4b0fb2);color:white"><i class="bi bi-tools"></i></div>
                    <div>
                        <h5 class="mb-0">Support Staff</h5>
                        <div class="card-description">Support roles & details</div>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 fade-up show">
            <a th:href="@{/technicaloperator}" class="card h-100 text-decoration-none text-reset entity-card p-3">
                <div class="d-flex gap-3 align-items-center">
                    <div class="entity-icon bg-dark text-white"><i class="bi bi-wrench"></i></div>
                    <div>
                        <h5 class="mb-0">Technical Operators</h5>
                        <div class="card-description">Technical specializations</div>
                    </div>
                </div>
            </a>
        </div>

    </div>

    <div class="row mt-4">
        <div class="col text-center">
            <a th:href="@{/halls}" class="btn btn-outline-primary">Open Halls management</a>
            <a th:href="@{/theatres}" class="btn btn-outline-secondary ms-2">Open Theatres</a>
        </div>
    </div>

    <footer class="mt-5 text-center">
        <div class="small text-muted">© <span th:text="${T(java.time.Year).now()}">2025</span> Cinema Admin — built with ❤️</div>
    </footer>

</main>

<script>
    // Small utilities: search/filter and reveal animation
    (function(){
        const search = document.getElementById('search');
        const clearBtn = document.getElementById('clearSearch');
        const container = document.getElementById('cardsContainer');
        const items = Array.from(container.querySelectorAll('.col-12'));

        function filter(q){
            const s = q.trim().toLowerCase();
            items.forEach(el=>{
                const text = el.innerText.toLowerCase();
                if(!s || text.includes(s)) el.style.display = '';
                else el.style.display = 'none';
            });
        }

        search && search.addEventListener('input', e=>filter(e.target.value));
        clearBtn && clearBtn.addEventListener('click', ()=>{ search.value=''; filter(''); search.focus(); });

        // reveal
        const reveals = document.querySelectorAll('.fade-up');
        const show = ()=>{
            reveals.forEach((r,i)=>setTimeout(()=>r.classList.add('show'), i*60));
        }
        if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', show); else show();
    })();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
